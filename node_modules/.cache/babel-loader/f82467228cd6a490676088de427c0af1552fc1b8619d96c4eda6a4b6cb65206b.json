{"ast":null,"code":"import { supabase, PRODUCTS_TABLE } from '../lib/supabase';\n\n/**\n * Product Entity\n * Represents furniture and decor products in the e-commerce system\n */\nexport class Product {\n  constructor(data = {}) {\n    this.id = data.id || null;\n    this.name = data.name || '';\n    this.description = data.description || '';\n    this.price = data.price || 0;\n    this.category = data.category || 'decor';\n    this.image_url = data.image_url || '';\n    this.gallery_images = data.gallery_images || [];\n    this.featured = data.featured !== undefined ? data.featured : false;\n    this.created_date = data.created_date || new Date().toISOString();\n  }\n\n  /**\n   * Validate product data\n   * @returns {Object} Validation result with isValid and errors\n   */\n  validate() {\n    const errors = [];\n    if (!this.name || this.name.trim().length === 0) {\n      errors.push('Product name is required');\n    }\n    if (!this.price || this.price <= 0) {\n      errors.push('Product price must be greater than 0');\n    }\n    const validCategories = ['living_room', 'bedroom', 'kitchen', 'bathroom', 'office', 'outdoor', 'lighting', 'decor'];\n    if (!this.category || !validCategories.includes(this.category)) {\n      errors.push('Valid category is required');\n    }\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  /**\n   * Convert to plain object\n   * @returns {Object} Plain object representation\n   */\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      description: this.description,\n      price: this.price,\n      category: this.category,\n      image_url: this.image_url,\n      gallery_images: this.gallery_images,\n      featured: this.featured,\n      created_date: this.created_date\n    };\n  }\n\n  /**\n   * Get formatted price with currency\n   * @returns {string} Formatted price\n   */\n  getFormattedPrice() {\n    return `${this.price} DA`;\n  }\n\n  /**\n   * Get category display name\n   * @returns {string} Human-readable category name\n   */\n  getCategoryDisplayName() {\n    return this.category.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  /**\n   * Check if product has gallery images\n   * @returns {boolean} True if gallery images exist\n   */\n  hasGalleryImages() {\n    return this.gallery_images && this.gallery_images.length > 0;\n  }\n\n  // Static methods for data operations (Supabase implementation)\n\n  /**\n   * Get all products with optional sorting\n   * @param {string} sortBy - Sort field (e.g., 'name', '-price', 'created_date')\n   * @returns {Promise<Product[]>} Array of products\n   */\n  static async list(sortBy = '-created_date') {\n    try {\n      // Fallback to mock data if Supabase is not configured\n      if (!supabase || process.env.REACT_APP_SUPABASE_URL === 'YOUR_SUPABASE_URL') {\n        return this.getMockData(sortBy);\n      }\n      let query = supabase.from(PRODUCTS_TABLE).select('*');\n\n      // Handle sorting\n      const sortField = sortBy.startsWith('-') ? sortBy.slice(1) : sortBy;\n      const ascending = !sortBy.startsWith('-');\n      query = query.order(sortField, {\n        ascending\n      });\n      const {\n        data,\n        error\n      } = await query;\n      if (error) {\n        console.error('Error fetching products:', error);\n        return this.getMockData(sortBy);\n      }\n      return data.map(item => new Product(item));\n    } catch (error) {\n      console.error('Error in Product.list:', error);\n      return this.getMockData(sortBy);\n    }\n  }\n  static getMockData(sortBy = '-created_date') {\n    const mockProducts = [new Product({\n      id: '1',\n      name: 'Modern Sofa Set',\n      description: 'Comfortable 3-seater sofa with premium fabric upholstery',\n      price: 45000,\n      category: 'living_room',\n      image_url: 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=800',\n      featured: true\n    }), new Product({\n      id: '2',\n      name: 'Oak Dining Table',\n      description: 'Solid oak dining table for 6 people',\n      price: 35000,\n      category: 'kitchen',\n      image_url: 'https://images.unsplash.com/photo-1449247709967-d4461a6a6103?w=800',\n      featured: true\n    }), new Product({\n      id: '3',\n      name: 'Bedside Lamp',\n      description: 'Modern ceramic bedside lamp with warm lighting',\n      price: 8500,\n      category: 'lighting',\n      image_url: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800',\n      featured: false\n    }), new Product({\n      id: '4',\n      name: 'Leather Armchair',\n      description: 'Premium leather armchair with ergonomic design',\n      price: 28000,\n      category: 'living_room',\n      image_url: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800',\n      featured: true\n    }), new Product({\n      id: '5',\n      name: 'Kitchen Island',\n      description: 'Multi-functional kitchen island with storage',\n      price: 55000,\n      category: 'kitchen',\n      image_url: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800',\n      featured: false\n    }), new Product({\n      id: '6',\n      name: 'Garden Bench',\n      description: 'Weather-resistant outdoor bench',\n      price: 15000,\n      category: 'outdoor',\n      image_url: 'https://images.unsplash.com/photo-1506439773649-6e0eb8cfb237?w=800',\n      featured: true\n    })];\n\n    // Simple sorting implementation\n    const sortField = sortBy.startsWith('-') ? sortBy.slice(1) : sortBy;\n    const sortOrder = sortBy.startsWith('-') ? -1 : 1;\n    return mockProducts.sort((a, b) => {\n      let aVal = a[sortField];\n      let bVal = b[sortField];\n      if (typeof aVal === 'string') {\n        aVal = aVal.toLowerCase();\n        bVal = bVal.toLowerCase();\n      }\n      if (aVal < bVal) return -1 * sortOrder;\n      if (aVal > bVal) return 1 * sortOrder;\n      return 0;\n    });\n  }\n\n  /**\n   * Get products with filters\n   * @param {Object} filters - Filter criteria\n   * @param {string} sortBy - Sort field\n   * @param {number} limit - Maximum number of results\n   * @returns {Promise<Product[]>} Filtered products\n   */\n  static async filter(filters = {}, sortBy = '-created_date', limit = null) {\n    try {\n      // Fallback to mock data if Supabase is not configured\n      if (!supabase || process.env.REACT_APP_SUPABASE_URL === 'YOUR_SUPABASE_URL') {\n        const allProducts = this.getMockData(sortBy);\n        let filtered = allProducts.filter(product => {\n          for (const [key, value] of Object.entries(filters)) {\n            if (product[key] !== value) {\n              return false;\n            }\n          }\n          return true;\n        });\n        if (limit) {\n          filtered = filtered.slice(0, limit);\n        }\n        return filtered;\n      }\n      let query = supabase.from(PRODUCTS_TABLE).select('*');\n\n      // Apply filters\n      for (const [key, value] of Object.entries(filters)) {\n        query = query.eq(key, value);\n      }\n\n      // Handle sorting\n      const sortField = sortBy.startsWith('-') ? sortBy.slice(1) : sortBy;\n      const ascending = !sortBy.startsWith('-');\n      query = query.order(sortField, {\n        ascending\n      });\n\n      // Apply limit\n      if (limit) {\n        query = query.limit(limit);\n      }\n      const {\n        data,\n        error\n      } = await query;\n      if (error) {\n        console.error('Error filtering products:', error);\n        // Fallback to mock data\n        const allProducts = this.getMockData(sortBy);\n        let filtered = allProducts.filter(product => {\n          for (const [key, value] of Object.entries(filters)) {\n            if (product[key] !== value) {\n              return false;\n            }\n          }\n          return true;\n        });\n        if (limit) {\n          filtered = filtered.slice(0, limit);\n        }\n        return filtered;\n      }\n      return data.map(item => new Product(item));\n    } catch (error) {\n      console.error('Error in Product.filter:', error);\n      // Fallback to mock data\n      const allProducts = this.getMockData(sortBy);\n      let filtered = allProducts.filter(product => {\n        for (const [key, value] of Object.entries(filters)) {\n          if (product[key] !== value) {\n            return false;\n          }\n        }\n        return true;\n      });\n      if (limit) {\n        filtered = filtered.slice(0, limit);\n      }\n      return filtered;\n    }\n  }\n\n  /**\n   * Get single product by ID\n   * @param {string} id - Product ID\n   * @returns {Promise<Product|null>} Product or null if not found\n   */\n  static async get(id) {\n    try {\n      // Fallback to mock data if Supabase is not configured\n      if (!supabase || process.env.REACT_APP_SUPABASE_URL === 'YOUR_SUPABASE_URL') {\n        const allProducts = this.getMockData();\n        return allProducts.find(product => product.id === id) || null;\n      }\n      const {\n        data,\n        error\n      } = await supabase.from(PRODUCTS_TABLE).select('*').eq('id', id).single();\n      if (error) {\n        if (error.code === 'PGRST116') {\n          // No rows returned\n          return null;\n        }\n        console.error('Error fetching product:', error);\n        // Fallback to mock data\n        const allProducts = this.getMockData();\n        return allProducts.find(product => product.id === id) || null;\n      }\n      return new Product(data);\n    } catch (error) {\n      console.error('Error in Product.get:', error);\n      // Fallback to mock data\n      const allProducts = this.getMockData();\n      return allProducts.find(product => product.id === id) || null;\n    }\n  }\n\n  /**\n   * Create new product\n   * @param {Object} data - Product data\n   * @returns {Promise<Product>} Created product\n   */\n  static async create(data) {\n    const product = new Product({\n      ...data,\n      created_date: new Date().toISOString()\n    });\n    const validation = product.validate();\n    if (!validation.isValid) {\n      throw new Error(`Validation failed: ${validation.errors.join(', ')}`);\n    }\n    try {\n      const {\n        data: insertedData,\n        error\n      } = await supabase.from(PRODUCTS_TABLE).insert([product.toJSON()]).select().single();\n      if (error) {\n        console.error('Error creating product:', error);\n        throw new Error(`Failed to create product: ${error.message}`);\n      }\n      return new Product(insertedData);\n    } catch (error) {\n      console.error('Error in Product.create:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update existing product\n   * @param {string} id - Product ID\n   * @param {Object} data - Updated data\n   * @returns {Promise<Product|null>} Updated product or null if not found\n   */\n  static async update(id, data) {\n    try {\n      // First check if product exists\n      const existingProduct = await this.get(id);\n      if (!existingProduct) {\n        return null;\n      }\n\n      // Update properties\n      Object.assign(existingProduct, data);\n      const validation = existingProduct.validate();\n      if (!validation.isValid) {\n        throw new Error(`Validation failed: ${validation.errors.join(', ')}`);\n      }\n      const {\n        data: updatedData,\n        error\n      } = await supabase.from(PRODUCTS_TABLE).update(existingProduct.toJSON()).eq('id', id).select().single();\n      if (error) {\n        console.error('Error updating product:', error);\n        throw new Error(`Failed to update product: ${error.message}`);\n      }\n      return new Product(updatedData);\n    } catch (error) {\n      console.error('Error in Product.update:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Delete product\n   * @param {string} id - Product ID\n   * @returns {Promise<boolean>} True if deleted successfully\n   */\n  static async delete(id) {\n    try {\n      const {\n        error\n      } = await supabase.from(PRODUCTS_TABLE).delete().eq('id', id);\n      if (error) {\n        console.error('Error deleting product:', error);\n        throw new Error(`Failed to delete product: ${error.message}`);\n      }\n      return true;\n    } catch (error) {\n      console.error('Error in Product.delete:', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"names":["supabase","PRODUCTS_TABLE","Product","constructor","data","id","name","description","price","category","image_url","gallery_images","featured","undefined","created_date","Date","toISOString","validate","errors","trim","length","push","validCategories","includes","isValid","toJSON","getFormattedPrice","getCategoryDisplayName","replace","l","toUpperCase","hasGalleryImages","list","sortBy","process","env","REACT_APP_SUPABASE_URL","getMockData","query","from","select","sortField","startsWith","slice","ascending","order","error","console","map","item","mockProducts","sortOrder","sort","a","b","aVal","bVal","toLowerCase","filter","filters","limit","allProducts","filtered","product","key","value","Object","entries","eq","get","find","single","code","create","validation","Error","join","insertedData","insert","message","update","existingProduct","assign","updatedData","delete"],"sources":["C:/Users/hakimm/Desktop/beta/src/entities/Product.js"],"sourcesContent":["import { supabase, PRODUCTS_TABLE } from '../lib/supabase';\n\n/**\n * Product Entity\n * Represents furniture and decor products in the e-commerce system\n */\nexport class Product {\n  constructor(data = {}) {\n    this.id = data.id || null;\n    this.name = data.name || '';\n    this.description = data.description || '';\n    this.price = data.price || 0;\n    this.category = data.category || 'decor';\n    this.image_url = data.image_url || '';\n    this.gallery_images = data.gallery_images || [];\n    this.featured = data.featured !== undefined ? data.featured : false;\n    this.created_date = data.created_date || new Date().toISOString();\n  }\n\n  /**\n   * Validate product data\n   * @returns {Object} Validation result with isValid and errors\n   */\n  validate() {\n    const errors = [];\n    \n    if (!this.name || this.name.trim().length === 0) {\n      errors.push('Product name is required');\n    }\n    \n    if (!this.price || this.price <= 0) {\n      errors.push('Product price must be greater than 0');\n    }\n    \n    const validCategories = [\n      'living_room', 'bedroom', 'kitchen', 'bathroom', \n      'office', 'outdoor', 'lighting', 'decor'\n    ];\n    \n    if (!this.category || !validCategories.includes(this.category)) {\n      errors.push('Valid category is required');\n    }\n    \n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  /**\n   * Convert to plain object\n   * @returns {Object} Plain object representation\n   */\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      description: this.description,\n      price: this.price,\n      category: this.category,\n      image_url: this.image_url,\n      gallery_images: this.gallery_images,\n      featured: this.featured,\n      created_date: this.created_date\n    };\n  }\n\n  /**\n   * Get formatted price with currency\n   * @returns {string} Formatted price\n   */\n  getFormattedPrice() {\n    return `${this.price} DA`;\n  }\n\n  /**\n   * Get category display name\n   * @returns {string} Human-readable category name\n   */\n  getCategoryDisplayName() {\n    return this.category.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  /**\n   * Check if product has gallery images\n   * @returns {boolean} True if gallery images exist\n   */\n  hasGalleryImages() {\n    return this.gallery_images && this.gallery_images.length > 0;\n  }\n\n\n  // Static methods for data operations (Supabase implementation)\n  \n  /**\n   * Get all products with optional sorting\n   * @param {string} sortBy - Sort field (e.g., 'name', '-price', 'created_date')\n   * @returns {Promise<Product[]>} Array of products\n   */\n  static async list(sortBy = '-created_date') {\n    try {\n      // Fallback to mock data if Supabase is not configured\n      if (!supabase || process.env.REACT_APP_SUPABASE_URL === 'YOUR_SUPABASE_URL') {\n        return this.getMockData(sortBy);\n      }\n\n      let query = supabase.from(PRODUCTS_TABLE).select('*');\n      \n      // Handle sorting\n      const sortField = sortBy.startsWith('-') ? sortBy.slice(1) : sortBy;\n      const ascending = !sortBy.startsWith('-');\n      \n      query = query.order(sortField, { ascending });\n      \n      const { data, error } = await query;\n      \n      if (error) {\n        console.error('Error fetching products:', error);\n        return this.getMockData(sortBy);\n      }\n      \n      return data.map(item => new Product(item));\n    } catch (error) {\n      console.error('Error in Product.list:', error);\n      return this.getMockData(sortBy);\n    }\n  }\n\n  static getMockData(sortBy = '-created_date') {\n    const mockProducts = [\n      new Product({\n        id: '1',\n        name: 'Modern Sofa Set',\n        description: 'Comfortable 3-seater sofa with premium fabric upholstery',\n        price: 45000,\n        category: 'living_room',\n        image_url: 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=800',\n        featured: true,\n      }),\n      new Product({\n        id: '2',\n        name: 'Oak Dining Table',\n        description: 'Solid oak dining table for 6 people',\n        price: 35000,\n        category: 'kitchen',\n        image_url: 'https://images.unsplash.com/photo-1449247709967-d4461a6a6103?w=800',\n        featured: true,\n      }),\n      new Product({\n        id: '3',\n        name: 'Bedside Lamp',\n        description: 'Modern ceramic bedside lamp with warm lighting',\n        price: 8500,\n        category: 'lighting',\n        image_url: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800',\n        featured: false,\n      }),\n      new Product({\n        id: '4',\n        name: 'Leather Armchair',\n        description: 'Premium leather armchair with ergonomic design',\n        price: 28000,\n        category: 'living_room',\n        image_url: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800',\n        featured: true,\n      }),\n      new Product({\n        id: '5',\n        name: 'Kitchen Island',\n        description: 'Multi-functional kitchen island with storage',\n        price: 55000,\n        category: 'kitchen',\n        image_url: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800',\n        featured: false,\n      }),\n      new Product({\n        id: '6',\n        name: 'Garden Bench',\n        description: 'Weather-resistant outdoor bench',\n        price: 15000,\n        category: 'outdoor',\n        image_url: 'https://images.unsplash.com/photo-1506439773649-6e0eb8cfb237?w=800',\n        featured: true,\n      })\n    ];\n\n    // Simple sorting implementation\n    const sortField = sortBy.startsWith('-') ? sortBy.slice(1) : sortBy;\n    const sortOrder = sortBy.startsWith('-') ? -1 : 1;\n    \n    return mockProducts.sort((a, b) => {\n      let aVal = a[sortField];\n      let bVal = b[sortField];\n      \n      if (typeof aVal === 'string') {\n        aVal = aVal.toLowerCase();\n        bVal = bVal.toLowerCase();\n      }\n      \n      if (aVal < bVal) return -1 * sortOrder;\n      if (aVal > bVal) return 1 * sortOrder;\n      return 0;\n    });\n  }\n\n  /**\n   * Get products with filters\n   * @param {Object} filters - Filter criteria\n   * @param {string} sortBy - Sort field\n   * @param {number} limit - Maximum number of results\n   * @returns {Promise<Product[]>} Filtered products\n   */\n  static async filter(filters = {}, sortBy = '-created_date', limit = null) {\n    try {\n      // Fallback to mock data if Supabase is not configured\n      if (!supabase || process.env.REACT_APP_SUPABASE_URL === 'YOUR_SUPABASE_URL') {\n        const allProducts = this.getMockData(sortBy);\n        \n        let filtered = allProducts.filter(product => {\n          for (const [key, value] of Object.entries(filters)) {\n            if (product[key] !== value) {\n              return false;\n            }\n          }\n          return true;\n        });\n        \n        if (limit) {\n          filtered = filtered.slice(0, limit);\n        }\n        \n        return filtered;\n      }\n\n      let query = supabase.from(PRODUCTS_TABLE).select('*');\n      \n      // Apply filters\n      for (const [key, value] of Object.entries(filters)) {\n        query = query.eq(key, value);\n      }\n      \n      // Handle sorting\n      const sortField = sortBy.startsWith('-') ? sortBy.slice(1) : sortBy;\n      const ascending = !sortBy.startsWith('-');\n      query = query.order(sortField, { ascending });\n      \n      // Apply limit\n      if (limit) {\n        query = query.limit(limit);\n      }\n      \n      const { data, error } = await query;\n      \n      if (error) {\n        console.error('Error filtering products:', error);\n        // Fallback to mock data\n        const allProducts = this.getMockData(sortBy);\n        let filtered = allProducts.filter(product => {\n          for (const [key, value] of Object.entries(filters)) {\n            if (product[key] !== value) {\n              return false;\n            }\n          }\n          return true;\n        });\n        \n        if (limit) {\n          filtered = filtered.slice(0, limit);\n        }\n        \n        return filtered;\n      }\n      \n      return data.map(item => new Product(item));\n    } catch (error) {\n      console.error('Error in Product.filter:', error);\n      // Fallback to mock data\n      const allProducts = this.getMockData(sortBy);\n      let filtered = allProducts.filter(product => {\n        for (const [key, value] of Object.entries(filters)) {\n          if (product[key] !== value) {\n            return false;\n          }\n        }\n        return true;\n      });\n      \n      if (limit) {\n        filtered = filtered.slice(0, limit);\n      }\n      \n      return filtered;\n    }\n  }\n\n  /**\n   * Get single product by ID\n   * @param {string} id - Product ID\n   * @returns {Promise<Product|null>} Product or null if not found\n   */\n  static async get(id) {\n    try {\n      // Fallback to mock data if Supabase is not configured\n      if (!supabase || process.env.REACT_APP_SUPABASE_URL === 'YOUR_SUPABASE_URL') {\n        const allProducts = this.getMockData();\n        return allProducts.find(product => product.id === id) || null;\n      }\n\n      const { data, error } = await supabase\n        .from(PRODUCTS_TABLE)\n        .select('*')\n        .eq('id', id)\n        .single();\n      \n      if (error) {\n        if (error.code === 'PGRST116') {\n          // No rows returned\n          return null;\n        }\n        console.error('Error fetching product:', error);\n        // Fallback to mock data\n        const allProducts = this.getMockData();\n        return allProducts.find(product => product.id === id) || null;\n      }\n      \n      return new Product(data);\n    } catch (error) {\n      console.error('Error in Product.get:', error);\n      // Fallback to mock data\n      const allProducts = this.getMockData();\n      return allProducts.find(product => product.id === id) || null;\n    }\n  }\n\n  /**\n   * Create new product\n   * @param {Object} data - Product data\n   * @returns {Promise<Product>} Created product\n   */\n  static async create(data) {\n    const product = new Product({\n      ...data,\n      created_date: new Date().toISOString()\n    });\n    \n    const validation = product.validate();\n    if (!validation.isValid) {\n      throw new Error(`Validation failed: ${validation.errors.join(', ')}`);\n    }\n    \n    try {\n      const { data: insertedData, error } = await supabase\n        .from(PRODUCTS_TABLE)\n        .insert([product.toJSON()])\n        .select()\n        .single();\n      \n      if (error) {\n        console.error('Error creating product:', error);\n        throw new Error(`Failed to create product: ${error.message}`);\n      }\n      \n      return new Product(insertedData);\n    } catch (error) {\n      console.error('Error in Product.create:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update existing product\n   * @param {string} id - Product ID\n   * @param {Object} data - Updated data\n   * @returns {Promise<Product|null>} Updated product or null if not found\n   */\n  static async update(id, data) {\n    try {\n      // First check if product exists\n      const existingProduct = await this.get(id);\n      if (!existingProduct) {\n        return null;\n      }\n      \n      // Update properties\n      Object.assign(existingProduct, data);\n      \n      const validation = existingProduct.validate();\n      if (!validation.isValid) {\n        throw new Error(`Validation failed: ${validation.errors.join(', ')}`);\n      }\n      \n      const { data: updatedData, error } = await supabase\n        .from(PRODUCTS_TABLE)\n        .update(existingProduct.toJSON())\n        .eq('id', id)\n        .select()\n        .single();\n      \n      if (error) {\n        console.error('Error updating product:', error);\n        throw new Error(`Failed to update product: ${error.message}`);\n      }\n      \n      return new Product(updatedData);\n    } catch (error) {\n      console.error('Error in Product.update:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Delete product\n   * @param {string} id - Product ID\n   * @returns {Promise<boolean>} True if deleted successfully\n   */\n  static async delete(id) {\n    try {\n      const { error } = await supabase\n        .from(PRODUCTS_TABLE)\n        .delete()\n        .eq('id', id);\n      \n      if (error) {\n        console.error('Error deleting product:', error);\n        throw new Error(`Failed to delete product: ${error.message}`);\n      }\n      \n      return true;\n    } catch (error) {\n      console.error('Error in Product.delete:', error);\n      throw error;\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}