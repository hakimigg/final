{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{supabase}from'../lib/supabase';import{jsx as _jsx}from\"react/jsx-runtime\";const AdminContext=/*#__PURE__*/createContext();export const useAdmin=()=>{const context=useContext(AdminContext);if(!context){throw new Error('useAdmin must be used within an AdminProvider');}return context;};export const AdminProvider=_ref=>{let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[isLoading,setIsLoading]=useState(true);const[user,setUser]=useState(null);useEffect(()=>{// Check if user is already logged in\nconst checkAuth=async()=>{try{if(!supabase){console.error('Supabase client not initialized');setIsLoading(false);return;}const{data:{session}}=await supabase.auth.getSession();if(session!==null&&session!==void 0&&session.user){setUser(session.user);setIsAuthenticated(true);}}catch(error){console.error('Auth check error:',error);}finally{setIsLoading(false);}};checkAuth();// Listen for auth changes\nif(supabase){const{data:{subscription}}=supabase.auth.onAuthStateChange(async(event,session)=>{if(session!==null&&session!==void 0&&session.user){setUser(session.user);setIsAuthenticated(true);}else{setUser(null);setIsAuthenticated(false);}setIsLoading(false);});return()=>subscription.unsubscribe();}else{setIsLoading(false);}},[]);const login=async(email,password)=>{try{// Hardcoded admin credentials for security\nconst ADMIN_EMAIL='admin@beta-secure-2024';const ADMIN_PASSWORD='BetaAdmin#2024!Secure';if(email===ADMIN_EMAIL&&password===ADMIN_PASSWORD){// Create a mock user object for the hardcoded admin\nconst mockUser={id:'admin-user-id',email:ADMIN_EMAIL,role:'admin'};setUser(mockUser);setIsAuthenticated(true);return{success:true};}else{return{success:false,error:'Invalid admin credentials'};}}catch(error){console.error('Login error:',error);return{success:false,error:error.message};}};const logout=async()=>{try{if(supabase){await supabase.auth.signOut();}setUser(null);setIsAuthenticated(false);}catch(error){console.error('Logout error:',error);}};const signup=async(email,password)=>{// Signup disabled for security - only one hardcoded admin account allowed\nreturn{success:false,error:'Account creation is disabled'};};const value={isAuthenticated,isLoading,user,login,logout,signup};return/*#__PURE__*/_jsx(AdminContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","supabase","jsx","_jsx","AdminContext","useAdmin","context","Error","AdminProvider","_ref","children","isAuthenticated","setIsAuthenticated","isLoading","setIsLoading","user","setUser","checkAuth","console","error","data","session","auth","getSession","subscription","onAuthStateChange","event","unsubscribe","login","email","password","ADMIN_EMAIL","ADMIN_PASSWORD","mockUser","id","role","success","message","logout","signOut","signup","value","Provider"],"sources":["C:/Users/hakimm/Desktop/beta/src/contexts/AdminContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\n\nconst AdminContext = createContext();\n\nexport const useAdmin = () => {\n  const context = useContext(AdminContext);\n  if (!context) {\n    throw new Error('useAdmin must be used within an AdminProvider');\n  }\n  return context;\n};\n\nexport const AdminProvider = ({ children }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // Check if user is already logged in\n    const checkAuth = async () => {\n      try {\n        if (!supabase) {\n          console.error('Supabase client not initialized');\n          setIsLoading(false);\n          return;\n        }\n\n        const { data: { session } } = await supabase.auth.getSession();\n        if (session?.user) {\n          setUser(session.user);\n          setIsAuthenticated(true);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAuth();\n\n    // Listen for auth changes\n    if (supabase) {\n      const { data: { subscription } } = supabase.auth.onAuthStateChange(\n        async (event, session) => {\n          if (session?.user) {\n            setUser(session.user);\n            setIsAuthenticated(true);\n          } else {\n            setUser(null);\n            setIsAuthenticated(false);\n          }\n          setIsLoading(false);\n        }\n      );\n\n      return () => subscription.unsubscribe();\n    } else {\n      setIsLoading(false);\n    }\n  }, []);\n\n  const login = async (email, password) => {\n    try {\n      // Hardcoded admin credentials for security\n      const ADMIN_EMAIL = 'admin@beta-secure-2024';\n      const ADMIN_PASSWORD = 'BetaAdmin#2024!Secure';\n\n      if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {\n        // Create a mock user object for the hardcoded admin\n        const mockUser = {\n          id: 'admin-user-id',\n          email: ADMIN_EMAIL,\n          role: 'admin'\n        };\n        \n        setUser(mockUser);\n        setIsAuthenticated(true);\n        return { success: true };\n      } else {\n        return { success: false, error: 'Invalid admin credentials' };\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      return { success: false, error: error.message };\n    }\n  };\n\n  const logout = async () => {\n    try {\n      if (supabase) {\n        await supabase.auth.signOut();\n      }\n      setUser(null);\n      setIsAuthenticated(false);\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n  };\n\n  const signup = async (email, password) => {\n    // Signup disabled for security - only one hardcoded admin account allowed\n    return { success: false, error: 'Account creation is disabled' };\n  };\n\n  const value = {\n    isAuthenticated,\n    isLoading,\n    user,\n    login,\n    logout,\n    signup,\n  };\n\n  return (\n    <AdminContext.Provider value={value}>\n      {children}\n    </AdminContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}